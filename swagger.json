{
  "openapi": "3.0.0",
  "info": {
    "title": "API de Zapatería - Reparadora Fercho",
    "version": "1.0.0",
    "description": "Documentación completa de la API para el sistema de gestión de zapatería. Incluye todas las operaciones CRUD para clientes, pedidos, cobros, sucursales y materiales.",
    "contact": {
      "name": "Reparadora Fercho",
      "email": "info@reparadorafercho.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080/api",
      "description": "Servidor de desarrollo local"
    },
    {
      "url": "https://tu-app.onrender.com/api",
      "description": "Servidor de producción (Render)"
    }
  ],
  "components": {
    "schemas": {
      "Cliente": {
        "type": "object",
        "required": [
          "nombre",
          "telefono"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del cliente"
          },
          "nombre": {
            "type": "string",
            "description": "Nombre completo del cliente"
          },
          "telefono": {
            "type": "string",
            "description": "Número de teléfono del cliente"
          },
          "fecha_registro": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de registro del cliente"
          }
        }
      },
      "Pedido": {
        "type": "object",
        "required": [
          "cliente_id",
          "sucursal_id",
          "descripcion_trabajo",
          "precio_total"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del pedido"
          },
          "cliente_id": {
            "type": "integer",
            "description": "ID del cliente asociado"
          },
          "sucursal_id": {
            "type": "integer",
            "description": "ID de la sucursal donde se realiza el trabajo"
          },
          "descripcion_trabajo": {
            "type": "string",
            "description": "Descripción detallada del trabajo a realizar"
          },
          "precio_total": {
            "type": "number",
            "description": "Precio total del trabajo"
          },
          "fecha_entrega_estimada": {
            "type": "string",
            "format": "date",
            "description": "Fecha estimada de entrega"
          },
          "estado": {
            "type": "string",
            "enum": [
              "Pendiente",
              "En Proceso",
              "Completado",
              "Entregado"
            ],
            "description": "Estado actual del pedido"
          },
          "observaciones": {
            "type": "string",
            "description": "Observaciones adicionales"
          },
          "fecha_creacion": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación del pedido"
          }
        }
      },
      "Cobro": {
        "type": "object",
        "required": [
          "pedido_id",
          "monto",
          "metodo_pago"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del cobro"
          },
          "pedido_id": {
            "type": "integer",
            "description": "ID del pedido asociado"
          },
          "monto": {
            "type": "number",
            "description": "Monto del cobro"
          },
          "metodo_pago": {
            "type": "string",
            "enum": [
              "Efectivo",
              "Tarjeta",
              "Transferencia"
            ],
            "description": "Método de pago utilizado"
          },
          "fecha_cobro": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha del cobro"
          }
        }
      },
      "Sucursal": {
        "type": "object",
        "required": [
          "nombre",
          "direccion",
          "telefono"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único de la sucursal"
          },
          "nombre": {
            "type": "string",
            "description": "Nombre de la sucursal"
          },
          "direccion": {
            "type": "string",
            "description": "Dirección de la sucursal"
          },
          "telefono": {
            "type": "string",
            "description": "Teléfono de la sucursal"
          },
          "estado": {
            "type": "string",
            "enum": [
              "Activa",
              "Inactiva"
            ],
            "description": "Estado de la sucursal"
          },
          "fecha_creacion": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación de la sucursal"
          }
        }
      },
      "Material": {
        "type": "object",
        "required": [
          "nombre",
          "cantidad_disponible",
          "precio_unitario"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID único del material"
          },
          "nombre": {
            "type": "string",
            "description": "Nombre del material"
          },
          "descripcion": {
            "type": "string",
            "description": "Descripción del material"
          },
          "cantidad_disponible": {
            "type": "integer",
            "description": "Cantidad disponible en inventario"
          },
          "precio_unitario": {
            "type": "number",
            "description": "Precio unitario del material"
          },
          "categoria": {
            "type": "string",
            "description": "Categoría del material"
          },
          "fecha_creacion": {
            "type": "string",
            "format": "date-time",
            "description": "Fecha de creación del material"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Mensaje de error"
          }
        }
      },
      "Success": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Datos de la respuesta"
          },
          "message": {
            "type": "string",
            "description": "Mensaje de éxito"
          }
        }
      }
    }
  },
  "paths": {
    "/clientes": {
      "get": {
        "summary": "Obtener todos los clientes",
        "description": "Retorna una lista de todos los clientes registrados en el sistema",
        "tags": [
          "Clientes"
        ],
        "responses": {
          "200": {
            "description": "Lista de clientes obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Cliente"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo cliente",
        "description": "Crea un nuevo cliente en el sistema",
        "tags": [
          "Clientes"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nombre",
                  "telefono"
                ],
                "properties": {
                  "nombre": {
                    "type": "string",
                    "description": "Nombre completo del cliente",
                    "example": "Juan Pérez"
                  },
                  "telefono": {
                    "type": "string",
                    "description": "Número de teléfono del cliente",
                    "example": "555-1234"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Cliente creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cliente creado exitosamente"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Cliente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/clientes/{id}": {
      "delete": {
        "summary": "Eliminar un cliente",
        "description": "Elimina un cliente del sistema. No se puede eliminar si tiene pedidos asociados",
        "tags": [
          "Clientes"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID del cliente a eliminar"
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente eliminado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cliente eliminado exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No se puede eliminar el cliente porque tiene pedidos asociados",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Cliente no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/cobros": {
      "get": {
        "summary": "Obtener todos los cobros",
        "description": "Retorna una lista de todos los cobros con información del pedido y cliente asociado",
        "tags": [
          "Cobros"
        ],
        "responses": {
          "200": {
            "description": "Lista de cobros obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Cobro"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo cobro",
        "description": "Crea un nuevo cobro para un pedido específico",
        "tags": [
          "Cobros"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "idPedido",
                  "monto",
                  "metodoPago"
                ],
                "properties": {
                  "idPedido": {
                    "type": "integer",
                    "description": "ID del pedido asociado",
                    "example": 1
                  },
                  "monto": {
                    "type": "number",
                    "description": "Monto del cobro",
                    "example": 45
                  },
                  "metodoPago": {
                    "type": "string",
                    "enum": [
                      "Efectivo",
                      "Transferencia"
                    ],
                    "description": "Método de pago utilizado",
                    "example": "Efectivo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Cobro creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Cobro creado exitosamente"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Cobro"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos o pedido no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/materiales": {
      "get": {
        "summary": "Obtener todos los materiales",
        "description": "Retorna una lista de todos los materiales ordenados por nombre",
        "tags": [
          "Materiales"
        ],
        "responses": {
          "200": {
            "description": "Lista de materiales obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Material"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo material",
        "description": "Crea un nuevo material en el inventario",
        "tags": [
          "Materiales"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nombre",
                  "precio_unitario"
                ],
                "properties": {
                  "nombre": {
                    "type": "string",
                    "description": "Nombre del material",
                    "example": "Suela de cuero"
                  },
                  "descripcion": {
                    "type": "string",
                    "description": "Descripción del material",
                    "example": "Suela de cuero natural para zapatos"
                  },
                  "precio_unitario": {
                    "type": "number",
                    "description": "Precio unitario del material",
                    "example": 25.5
                  },
                  "stock": {
                    "type": "integer",
                    "description": "Cantidad disponible en inventario",
                    "example": 100
                  },
                  "unidad": {
                    "type": "string",
                    "description": "Unidad de medida",
                    "example": "Unidad"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Material creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Material creado exitosamente"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Material"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/pedidos": {
      "get": {
        "summary": "Obtener todos los pedidos",
        "description": "Retorna una lista de todos los pedidos con información del cliente y sucursal",
        "tags": [
          "Pedidos"
        ],
        "responses": {
          "200": {
            "description": "Lista de pedidos obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "idCliente": {
                            "type": "integer"
                          },
                          "idSucursal": {
                            "type": "integer"
                          },
                          "descripcion": {
                            "type": "string"
                          },
                          "estado": {
                            "type": "string"
                          },
                          "fecha_creacion": {
                            "type": "string"
                          },
                          "nombreCliente": {
                            "type": "string"
                          },
                          "nombreSucursal": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo pedido",
        "description": "Crea un nuevo pedido en el sistema",
        "tags": [
          "Pedidos"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "idCliente",
                  "idSucursal",
                  "descripcion"
                ],
                "properties": {
                  "idCliente": {
                    "type": "integer",
                    "description": "ID del cliente",
                    "example": 1
                  },
                  "idSucursal": {
                    "type": "integer",
                    "description": "ID de la sucursal",
                    "example": 1
                  },
                  "descripcion": {
                    "type": "string",
                    "description": "Descripción del trabajo a realizar",
                    "example": "Reparación de suela de zapato deportivo"
                  },
                  "estado": {
                    "type": "string",
                    "enum": [
                      "Pendiente",
                      "Entregado"
                    ],
                    "description": "Estado del pedido",
                    "example": "Pendiente"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Pedido creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Pedido creado exitosamente"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer"
                        },
                        "idCliente": {
                          "type": "integer"
                        },
                        "idSucursal": {
                          "type": "integer"
                        },
                        "descripcion": {
                          "type": "string"
                        },
                        "estado": {
                          "type": "string"
                        },
                        "fecha_creacion": {
                          "type": "string"
                        },
                        "nombreCliente": {
                          "type": "string"
                        },
                        "nombreSucursal": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos o cliente/sucursal no encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/sucursales": {
      "get": {
        "summary": "Obtener todas las sucursales",
        "description": "Retorna una lista de todas las sucursales ordenadas por nombre",
        "tags": [
          "Sucursales"
        ],
        "responses": {
          "200": {
            "description": "Lista de sucursales obtenida exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Sucursal"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear una nueva sucursal",
        "description": "Crea una nueva sucursal en el sistema",
        "tags": [
          "Sucursales"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nombre",
                  "direccion",
                  "telefono"
                ],
                "properties": {
                  "nombre": {
                    "type": "string",
                    "description": "Nombre de la sucursal",
                    "example": "Sucursal Centro"
                  },
                  "direccion": {
                    "type": "string",
                    "description": "Dirección de la sucursal",
                    "example": "Av. Principal 123, Centro"
                  },
                  "telefono": {
                    "type": "string",
                    "description": "Teléfono de la sucursal",
                    "example": "555-1001"
                  },
                  "estado": {
                    "type": "string",
                    "enum": [
                      "Activa",
                      "Inactiva"
                    ],
                    "description": "Estado de la sucursal",
                    "example": "Activa"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sucursal creada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Sucursal creada exitosamente"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Sucursal"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": []
}